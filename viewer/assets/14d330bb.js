import{c as _}from"./index.dc3130ce.js";var v=r=>[r.mostUnique,r.max,r.min].every(s=>s>r.mostUnique-.01&&s<r.mostUnique+.01),l={exports:{}};(function(r,u){(function(n,s){r.exports=s()})(_,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(t,e){this._listeners[t]=this._listeners[t]||[],this._listeners[t].indexOf(e)<0&&this._listeners[t].push(e)},n.prototype.removeEventListener=function(t,e){if(this._listeners[t]){var i=this._listeners[t].indexOf(e);i>=0&&this._listeners[t].splice(i,1)}},n.prototype.dispatchEvent=function(t){if(this._listeners[t.type]&&this._listeners[t.type].length)for(var e=this._listeners[t.type].slice(),i=0,c=e.length;i<c;++i)e[i].call(this,t)};var s=function(t){return typeof t.constructor=="function"&&t.constructor.name==="GeneratorFunction"},p=function(t){return{next:function(){var e=t();return e?{value:e}:{done:!0}}}},h=function(t){var e=!1;return{next:function(){return e?{done:!0}:(e=!0,{value:t})}}},a=function(t,e){var i=typeof t;if(i==="object"){if(typeof t.next=="function")return t;if(typeof t.then=="function")return h(t)}return i==="function"?s(t)?t():p(t):h(e.resolve(t))},f=function(t,e,i){this.target=t,this.type=e,this.data=i},o=function(t,e,i){if(n.call(this),typeof e!="number"||Math.floor(e)!==e||e<1)throw new Error("Invalid concurrency");this._concurrency=e,this._options=i||{},this._options.promise=this._options.promise||Promise,this._iterator=a(t,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return o.prototype=new n,o.prototype.constructor=o,o.prototype.concurrency=function(t){return typeof t!="undefined"&&(this._concurrency=t,this.active()&&this._proceed()),this._concurrency},o.prototype.size=function(){return this._size},o.prototype.active=function(){return!!this._promise},o.prototype.promise=function(){return this._promise},o.prototype.start=function(){var t=this,e=this._options.promise;return this._promise=new e(function(i,c){t._callbacks={reject:c,resolve:i},t._proceed()}),this._promise},o.prototype._fireEvent=function(t,e){this.dispatchEvent(new f(this,t,e))},o.prototype._settle=function(t){t?this._callbacks.reject(t):this._callbacks.resolve(),this._promise=null,this._callbacks=null},o.prototype._onPooledPromiseFulfilled=function(t,e){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:t,result:e}),this._proceed())},o.prototype._onPooledPromiseRejected=function(t,e){this._size--,this.active()&&(this._fireEvent("rejected",{promise:t,error:e}),this._settle(e||new Error("Unknown error")))},o.prototype._trackPromise=function(t){var e=this;t.then(function(i){e._onPooledPromiseFulfilled(t,i)},function(i){e._onPooledPromiseRejected(t,i)}).catch(function(i){e._settle(new Error("Promise processing failed: "+i))})},o.prototype._proceed=function(){if(!this._done){for(var t={done:!1};this._size<this._concurrency&&!(t=this._iterator.next()).done;)this._size++,this._trackPromise(t.value);this._done=t===null||!!t.done}this._done&&this._size===0&&this._settle()},o.PromisePoolEvent=f,o.PromisePool=o,o})})(l);var d=l.exports;export{d as P,v as i};
